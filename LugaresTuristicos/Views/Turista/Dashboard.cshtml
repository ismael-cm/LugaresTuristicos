@model CommonProfile

<style>

:root {
    --color-dark: hs1(252,30%,17%);
    --color-light: #f2f5f8;
    --color-gray: hs1(252,15%,65%);
    --color-primary: #3cafa3;
    --border-radius: 2rem;
    --card-border-radius: 1rem;
    --card-padding: 1rem;
    --btn-padding: 0.6rem 2rem;
    --btn-seemore: #20659d;
}


html {
    font-size: 14px;
    position: relative;
    min-height: 100%;
}

body {
    margin-bottom: 60px;
    font-family: "Poppins", sans-serif;
    color: var(--color-dark);
    background: var(--color-light);
}
.btn{
    display:inline-block;
    padding:var(--btn-padding);
    font-weight:500;
    border-radius:var(--border-radius);
    cursor:pointer;
    transition:all 300ms ease;
    font-size:0.9rem;
}
.btn:hover{
    opacity:0.8;
}
.btn-principal{
    background-color:var(--color-primary);
    color:white;
}
.profile-photo{
    width:2.7rem;
    aspect-ratio:1/1;
    border-radius:50%;
    overflow:hidden;
}

.profile-photo-align {
    width: 100%;
    display:flex;
    justify-content:center;
}

.profile-photo-primary {
    width: 7rem;
    aspect-ratio: 1/1;
    border-radius: 50%;
    overflow: hidden;
}
.data {
    color:var(--color-dark);
    padding:var(--card-padding);
    background-color:white;
    border-radius:var(--card-border-radius);
    text-align:center;
}

.profile {
    color:var(--color-dark);
    padding:var(--card-padding);
    background-color:white;
    border-radius:var(--card-border-radius);
    text-align:center;
}
    .profile a {
        text-decoration: none;
        color: var(--color-dark);
    }

.sidebar {
    color: var(--color-dark);
    padding: var(--card-padding);
    background-color: white;
    border-radius: var(--card-border-radius);
    
}

    .sidebar a {
        text-decoration: none;
        color: var(--color-dark);
    }
    .sidebar .menu-item {
        display: flex;
        height: 3rem;
        cursor: pointer;
        transition: all 300ms ease;
        position: relative;
        align-items: center;
    }
    .itemm{
        
    }
    .sidebar .menu-item:hover {
        background:var(--color-light);
    }

    .menu-item i {
        font-size: 1.4rem;
        color:gray;
        margin-left: 2rem;
        position: relative;
    }
.menu-item h5 {
    font-weight:300;
}

img{
    display:block;
    width:100%;
}
.container {
    background: var(--color-light);
}
main .container .left {
    height:max-content;
    position:sticky;
}

.text-muted{
    color:var(--color-gray);
}

.middle .create-post {
    width: 100%;
    background-color: white;
    border-radius: var(--card-border-radius);
    padding: var(--card-padding);
}

.middle .feed {
    width: 100%;
    background-color: white;
    border-radius: var(--card-border-radius);
    padding: var(--card-padding);
}

.middle .feed .feed-photo{
    border-radius:var(--card-border-radius);
    overflow:hidden;
    margin: 0.7rem 0;

}

.feed-location {
   color:#696969;
}

.feed-button {
    display:flex;
    justify-content:center;
}

    .feed-button button {
        background: var(--btn-seemore);
        border-color: var(--btn-seemore);
    }
</style>

<div class="container">
    <div class="row">
        <div class="left col-md-3 grid gap-0 row-gap-3">
            <div class="row p-2 g-col-12">
                <div class="profile">
                    <div class="profile-photo-align">
                        <div class="profile-photo-primary">
                            <img src="data:image;base64,@Convert.ToBase64String(Model.Usuario.Imagen)" alt="Foto de perfil" class="profile-picture">
                        </div>
                    </div>
                    <div class="handle">
                        <br />
                        <b>@Model.Usuario.Nombre @Model.Usuario.Apellido</b>
                        <p class="text-muted">
                            @Model.Usuario.Edad
                            <br />
                            @Model.Usuario.Correo 
                        </p>
                    </div>
                </div>
            </div>
            <div class="row p-2 g-col-12">
                <div class="sidebar">
                    <a class="menu-item active">
                        <span>
                        </span>&nbsp; &nbsp;<h5> Inicio</h5>
                    </a>
                    <a class="menu-item">
                        <span></span>&nbsp; &nbsp; <h5>Cerrar Sesión</h5>
                    </a>
                </div>
            </div>
        </div>
        <div class="middle col-md-6 grid gap-0 row-gap-3">
            <div class="row p-2 g-col-12">
                <div class="create-post">
                    @*<form class="row g-2">
                        <div class="col-auto">
                            <div class="profile-photo">
                                <img src="~/img/profile.jpg" alt="" />
                            </div>
                        </div>
                        <div class="col-7">
                            <input type="text" class="form-control" placeholder="Escribe una nueva publicación" id="create-post" />
                        </div>
                        <div class="col-auto">
                            <input type="submit" value="Publicar" class="btn btn-principal" />
                        </div>
                    </form>*@
                    Filtro de búsqueda
                </div>
            </div>
            @if (Model.Lugares.Count > 0)
            {
            foreach (var item in Model.Lugares)
                {
                    DateTime fechaPublicacion = Convert.ToDateTime(item.FechaPublicacion);
                    TimeSpan diferencia = DateTime.Now - fechaPublicacion;

                    string formatoFecha;

                    if (diferencia.TotalDays >= 7)
                    {
                        formatoFecha = fechaPublicacion.ToString("dd/MM/yyyy");
                    }
                    else if (diferencia.TotalDays >= 2)
                    {
                        formatoFecha = $"{(int)diferencia.TotalDays} días atrás";
                    }
                    else if (diferencia.TotalDays >= 1)
                    {
                        formatoFecha = "Ayer";
                    }
                    else
                    {
                        formatoFecha = "Hoy";
                    }

                    <div class="row p-2 g-col-12">
                        <div class="feed">
                            <label asp-for="@item.IdLugar" style="display: none;"></label>
                            <input asp-for="@item.IdLugar" name="IdLugar" class="form-control" hidden />  
                            <div class="d-flex justify-content-between">
                                <div class="row g-2 feed-header">
                                    <div class="col-auto">
                                        <div class="profile-photo">
                                            <img src="data:image;base64,@Convert.ToBase64String(item.IdUsuarioNavigation.Imagen)" alt="Foto de perfil" class="profile-picture">
                                        </div>

                                    </div>
                                    <div class="col-auto">
                                        <b>@item.IdUsuarioNavigation.Nombre @item.IdUsuarioNavigation.Apellido</b>
                                        <p class="text-muted">@formatoFecha</p>
                                    </div> 
                                </div>
                                <div class="d-flex justify-content-end">
                                    
                                    <div class="valoracion">
                                        <button id="star5" class="icon-button">
                                            <i class="fas fa-star icon"></i>
                                        </button>
                                        <button id="star4" class="icon-button">
                                            <i class="fas fa-star icon"></i>
                                        </button> 
                                        <button id="star3" class="icon-button">
                                            <i class="fas fa-star icon"></i>
                                        </button>
                                        <button id="star2" class="icon-button">
                                            <i class="fas fa-star icon"></i>
                                        </button>
                                        <button id="star1" class="icon-button">
                                            <i class="fa fa-star icon"></i>
                                        </button>

                                    </div>
                                </div>
                            </div>
                            <div class="row feed-description">
                                <div class="col-auto">
                                    <h4>@item.NombreLugar</h4>
                                </div>
                            </div>
                            <div class="row g1 feed-location">
                                <div class="col-auto">
                                    <svg width="20" height="20" fill="#696969" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 11a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path>
                                        <path d="M12 2a8 8 0 0 0-8 7.92c0 5.48 7.05 11.58 7.35 11.84a1 1 0 0 0 1.3 0C13 21.5 20 15.4 20 9.92A8 8 0 0 0 12 2Zm0 11a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Z"></path>
                                    </svg>
                                    @item.IdMunicipioNavigation.Municipio1, @item.IdMunicipioNavigation.IdDeptoNavigation.Departamento1
                                </div>
                            </div>
                            <div class="row feed-description">
                                <div class="col-auto">
                                    <p>
                                        @item.Descripcion
                                    </p>
                                </div>
                            </div>
                            <div class="feed-photo">
                                <img src="data:image;base64,@Convert.ToBase64String(item.Imagen)" alt="Foto de perfil" class="profile-picture">
                            </div>
                            <div class="feed-button">
                                <a class="btn btn-primary btn-sm" asp-action="PostDetails" asp-controller="Turista" asp-route-id="@item.IdLugar">Ver publicación</a>
                            </div>
                        </div>
                    </div>
                }
            }

        </div>
        <div class="right col-md-3 grid gap-0 row-gap-3">
            <div class="row p-2 g-col-12">
                <div class="data">
                    </div>
            </div>
        </div>
    </div>

</div>




